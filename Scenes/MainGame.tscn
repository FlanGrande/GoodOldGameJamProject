[gd_scene load_steps=12 format=2]

[ext_resource path="res://Enemy/Enemy.tscn" type="PackedScene" id=1]
[ext_resource path="res://Player/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://Environment/platform.png" type="Texture" id=3]
[ext_resource path="res://Environment/background.png" type="Texture" id=4]
[ext_resource path="res://Environment/lava.png" type="Texture" id=5]
[ext_resource path="res://Scenes/MainGame.gd" type="Script" id=6]
[ext_resource path="res://Environment/Lava.gd" type="Script" id=7]
[ext_resource path="res://Scenes/NavigationMap.gd" type="Script" id=12]

[sub_resource type="NavigationPolygon" id=27]
vertices = PoolVector2Array( 721, 455, 1029, 435, 1124, 456, 1129, 614, 719, 485, 927, 411, 976, 410, 868, 416, 826, 401, 795, 369, 740, 212, 748, 177, 953, 140, 958, 170, 865, 340, 793, 342, 1123, 29, 1132, 140, 1032, 139, -41, 18, 656, 178, 385, 180, 289, 179, 132, 146, 33, 145, -56, 141, 1015, 202, 1153, 196, 1155, 377, 1042, 376, 978, 339, 977, 197, -41, 372, -41, 198, 82, 198, 197, 378, 109, 189, 174, 599, 115, 625, 71, 642, 24, 648, -36, 625, -27, 450, 83, 446, 251, 444, 394, 511, 211, 609, 280, 436, 373, 484, 632, 454, 700, 235, 266, 377, 129, 169, 298, 208, 693, 513, 961, 599, 338, 230, 292, 385, 392, 234, 302, 408, 837, 644, 234, 647, 614, 524, 862, 618, 378, 455, 464, 225, 452, 454, 1024.79, 644.35, 898, 594, 491, 524, 431, 521, 566, 224, 638, 231 )
polygons = [ PoolIntArray( 0, 1, 2, 3, 4 ), PoolIntArray( 5, 6, 1, 0, 7 ), PoolIntArray( 8, 7, 0 ), PoolIntArray( 9, 8, 0 ), PoolIntArray( 10, 11, 12, 13, 14, 15 ), PoolIntArray( 16, 17, 18, 19 ), PoolIntArray( 19, 18, 12 ), PoolIntArray( 19, 12, 11, 20, 21, 22, 23 ), PoolIntArray( 24, 25, 19, 23 ), PoolIntArray( 26, 27, 28, 29, 30 ), PoolIntArray( 31, 26, 30, 14 ), PoolIntArray( 32, 33, 34, 35 ), PoolIntArray( 35, 34, 36 ), PoolIntArray( 37, 38, 39, 40, 41, 42, 43, 44 ), PoolIntArray( 45, 46, 37, 44, 47, 48 ), PoolIntArray( 13, 31, 14 ), PoolIntArray( 0, 49, 50, 10, 15, 9 ), PoolIntArray( 51, 35, 36, 52, 22, 53 ), PoolIntArray( 54, 4, 3, 55 ), PoolIntArray( 52, 23, 22 ), PoolIntArray( 51, 53, 56, 57 ), PoolIntArray( 57, 56, 58, 59 ), PoolIntArray( 60, 61, 46, 62, 54, 63 ), PoolIntArray( 64, 59, 58, 65, 66 ), PoolIntArray( 3, 67, 55 ), PoolIntArray( 54, 55, 68 ), PoolIntArray( 54, 68, 63 ), PoolIntArray( 69, 62, 46 ), PoolIntArray( 70, 69, 46 ), PoolIntArray( 45, 70, 46 ), PoolIntArray( 64, 48, 47, 59 ), PoolIntArray( 49, 66, 65, 71, 72 ), PoolIntArray( 49, 72, 50 ) ]
outlines = [ PoolVector2Array( 1153, 196, 1155, 377, 1042, 376, 978, 339, 865, 340, 793, 342, 795, 369, 826, 401, 868, 416, 927, 411, 976, 410, 1029, 435, 1124, 456, 1129, 614, 1024.79, 644.35, 961, 599, 898, 594, 862, 618, 837, 644, 234, 647, 211, 609, 174, 599, 115, 625, 71, 642, 24, 648, -36, 625, -27, 450, 83, 446, 251, 444, 280, 436, 302, 408, 292, 385, 266, 377, 197, 378, -41, 372, -41, 198, 82, 198, 109, 189, 129, 169, 132, 146, 33, 145, -56, 141, -41, 18, 1123, 29, 1132, 140, 1032, 139, 953, 140, 958, 170, 977, 197, 1015, 202 ), PoolVector2Array( 289, 179, 385, 180, 656, 178, 748, 177, 740, 212, 700, 235, 638, 231, 566, 224, 464, 225, 392, 234, 338, 230, 298, 208 ), PoolVector2Array( 452, 454, 632, 454, 721, 455, 719, 485, 693, 513, 614, 524, 491, 524, 431, 521, 394, 511, 373, 484, 378, 455 ) ]

[sub_resource type="RectangleShape2D" id=7]
extents = Vector2( 64, 32 )

[sub_resource type="RectangleShape2D" id=18]
extents = Vector2( 592.5, 56 )

[node name="MainGame" type="Node2D"]
script = ExtResource( 6 )

[node name="bg" type="Sprite" parent="."]
position = Vector2( 541, 363 )
scale = Vector2( 9.0858, 12.76 )
texture = ExtResource( 4 )

[node name="Player" parent="." groups=["player"] instance=ExtResource( 2 )]
position = Vector2( 536, 596 )

[node name="NavigationMap" type="Navigation2D" parent="."]
script = ExtResource( 12 )
minimum_spawn_time = 4
maximum_spawn_time = 8
enemy_scene = ExtResource( 1 )

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="NavigationMap"]
navpoly = SubResource( 27 )

[node name="SpawnTimer" type="Timer" parent="NavigationMap"]

[node name="Spawn1" type="Node2D" parent="NavigationMap"]
position = Vector2( 70, 223 )

[node name="Spawn2" type="Node2D" parent="NavigationMap"]
position = Vector2( 1041, 231 )

[node name="Spawn3" type="Node2D" parent="NavigationMap"]
position = Vector2( 54, 543 )

[node name="Spawn4" type="Node2D" parent="NavigationMap"]
position = Vector2( 1034, 539 )

[node name="Level" type="Node2D" parent="."]
position = Vector2( 540, 590 )

[node name="Platforms" type="Node2D" parent="Level"]

[node name="MainFloor" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 0, 59 )
scale = Vector2( 5.8, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/MainFloor"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/MainFloor"]
shape = SubResource( 7 )

[node name="MainCeiling" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -19, -610 )
scale = Vector2( 12.5868, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/MainCeiling"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/MainCeiling"]
shape = SubResource( 7 )

[node name="SidePlatformLeft" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -450, -216 )
scale = Vector2( 2.6, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/SidePlatformLeft"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/SidePlatformLeft"]
shape = SubResource( 7 )

[node name="SidePlatformRight" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 391, -249 )
scale = Vector2( 1.4, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/SidePlatformRight"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/SidePlatformRight"]
shape = SubResource( 7 )

[node name="SidePlatformRight2" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 561, -216 )
scale = Vector2( 1.4, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/SidePlatformRight2"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/SidePlatformRight2"]
shape = SubResource( 7 )

[node name="TopPlatform" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -32, -410 )
scale = Vector2( 2.68, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/TopPlatform"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/TopPlatform"]
shape = SubResource( 7 )

[node name="MiddlePlatform" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 0, -135 )
scale = Vector2( 2, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/MiddlePlatform"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/MiddlePlatform"]
shape = SubResource( 7 )

[node name="TopPlatformLeft" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -634, -450 )
scale = Vector2( 2.68, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/TopPlatformLeft"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/TopPlatformLeft"]
shape = SubResource( 7 )

[node name="TopPlatformRight" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 634, -450 )
scale = Vector2( 2.68, 0.5 )

[node name="Sprite" type="Sprite" parent="Level/Platforms/TopPlatformRight"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/TopPlatformRight"]
shape = SubResource( 7 )

[node name="Lava" type="Node2D" parent="Level"]
position = Vector2( 0, 128 )

[node name="Sprite" type="Sprite" parent="Level/Lava"]
position = Vector2( 0, 37 )
texture = ExtResource( 5 )

[node name="Area2D" type="Area2D" parent="Level/Lava" groups=["lava"]]
script = ExtResource( 7 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Lava/Area2D"]
position = Vector2( 3.5, 48 )
shape = SubResource( 18 )

[connection signal="spawn_enemy" from="NavigationMap" to="Level/Lava/Area2D" method="_on_NavigationMap_spawn_enemy"]
[connection signal="timeout" from="NavigationMap/SpawnTimer" to="NavigationMap" method="_on_SpawnTimer_timeout"]
[connection signal="body_entered" from="Level/Lava/Area2D" to="Player" method="_on_Area2D_body_entered"]
