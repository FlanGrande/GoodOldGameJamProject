[gd_scene load_steps=20 format=2]

[ext_resource path="res://Environment/PlatformLeft.png" type="Texture" id=1]
[ext_resource path="res://Player/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://Environment/platform.png" type="Texture" id=3]
[ext_resource path="res://Environment/background.png" type="Texture" id=4]
[ext_resource path="res://Environment/lava.png" type="Texture" id=5]
[ext_resource path="res://Scenes/MainGame.gd" type="Script" id=6]
[ext_resource path="res://Environment/Lava.gd" type="Script" id=7]
[ext_resource path="res://Environment/PlatformRight.png" type="Texture" id=8]
[ext_resource path="res://Enemy/Enemy.tscn" type="PackedScene" id=9]
[ext_resource path="res://Environment/PlatformRightSmall.png" type="Texture" id=10]
[ext_resource path="res://Environment/PlatformTop.png" type="Texture" id=11]
[ext_resource path="res://Scenes/NavigationMap.gd" type="Script" id=12]
[ext_resource path="res://Environment/PlatformCenter.png" type="Texture" id=13]
[ext_resource path="res://Environment/PlatformTopLeft.png" type="Texture" id=14]
[ext_resource path="res://Environment/PlatformTopRight.png" type="Texture" id=15]
[ext_resource path="res://Environment/MainPlatform.png" type="Texture" id=16]

[sub_resource type="NavigationPolygon" id=37]
vertices = PoolVector2Array( 719, 464, 1049, 424, 1138, 441, 1136, 667, 1060, 690, 989, 644, 968, 404, 921, 393, 835, 380, 879, 383, 799, 385, 748, 177, 943, 155, 969, 179, 981, 325, 845, 320, 784, 303, 740, 212, 764, 385, 715, 439, 859, 95, 898, 109, 929, 126, 729, 153, 227, 360, -70, 367, -66, 201, 82, 198, 139, 185, 281, 336, 1038, 193, 1153, 196, 1156, 367, 1046, 367, 742, 306, 700, 235, 739, 363, 697, 428, 252, 92, 687, 150, 659, 172, 385, 168, 333, 147, 291, 149, 220, 107, 171, 158, 275, 174, 289, 207, 93, 644, 60, 667, 11, 688, -63, 676, -59, 443, 52, 427, 181, 420, 140, 632, 193, 647, 270, 419, 194, 131, 338, 230, 305, 340, 392, 234, 317, 364, 244, 695, 303, 413, 360, 451, 359, 479, 729, 329, 638, 231, 863, 648, 840, 686, 396, 499, 447, 505, 509, 513, 464, 225, 566, 224, 406, 434, 380, 434, 314, 394, 668, 436, 645, 458, 425, 458, 597, 512, 666, 499, 704, 489, 904, 632, 954, 631, 1022, 676 )
polygons = [ PoolIntArray( 0, 1, 2, 3, 4, 5 ), PoolIntArray( 6, 1, 0, 7 ), PoolIntArray( 8, 9, 7, 0, 10 ), PoolIntArray( 11, 12, 13, 14, 15, 16, 17 ), PoolIntArray( 18, 10, 0, 19 ), PoolIntArray( 20, 21, 22, 12, 11, 23 ), PoolIntArray( 24, 25, 26, 27 ), PoolIntArray( 24, 27, 28, 29 ), PoolIntArray( 30, 31, 32, 33, 14 ), PoolIntArray( 13, 30, 14 ), PoolIntArray( 17, 16, 34, 35 ), PoolIntArray( 36, 18, 19, 37 ), PoolIntArray( 38, 20, 23, 39 ), PoolIntArray( 38, 39, 40, 41, 42 ), PoolIntArray( 38, 42, 43, 44 ), PoolIntArray( 29, 28, 45, 46, 47 ), PoolIntArray( 48, 49, 50, 51, 52, 53, 54 ), PoolIntArray( 55, 48, 54 ), PoolIntArray( 56, 55, 54, 57 ), PoolIntArray( 58, 44, 43, 46, 45 ), PoolIntArray( 29, 47, 59, 60 ), PoolIntArray( 60, 59, 61, 62 ), PoolIntArray( 63, 56, 57, 64, 65, 66 ), PoolIntArray( 35, 34, 67, 68 ), PoolIntArray( 69, 70, 63, 71, 72, 73 ), PoolIntArray( 62, 61, 74, 75, 68, 76, 77, 78 ), PoolIntArray( 79, 80, 81, 76, 68 ), PoolIntArray( 68, 67, 36, 37, 79 ), PoolIntArray( 78, 77, 65, 64 ), PoolIntArray( 63, 66, 71 ), PoolIntArray( 69, 73, 82 ), PoolIntArray( 69, 82, 83 ), PoolIntArray( 69, 83, 84 ), PoolIntArray( 69, 84, 0, 85 ), PoolIntArray( 86, 85, 0 ), PoolIntArray( 4, 87, 5 ), PoolIntArray( 86, 0, 5 ) ]
outlines = [ PoolVector2Array( 1153, 196, 1156, 367, 1046, 367, 981, 325, 845, 320, 784, 303, 742, 306, 729, 329, 739, 363, 764, 385, 799, 385, 835, 380, 879, 383, 921, 393, 968, 404, 1049, 424, 1138, 441, 1136, 667, 1060, 690, 1022, 676, 989, 644, 954, 631, 904, 632, 863, 648, 840, 686, 244, 695, 193, 647, 140, 632, 93, 644, 60, 667, 11, 688, -63, 676, -59, 443, 52, 427, 181, 420, 270, 419, 303, 413, 314, 394, 317, 364, 305, 340, 281, 336, 227, 360, -70, 367, -66, 201, 82, 198, 139, 185, 171, 158, 194, 131, 220, 107, 252, 92, 859, 95, 898, 109, 929, 126, 943, 155, 969, 179, 1038, 193 ), PoolVector2Array( 275, 174, 291, 149, 333, 147, 385, 168, 659, 172, 687, 150, 729, 153, 748, 177, 740, 212, 700, 235, 638, 231, 566, 224, 464, 225, 392, 234, 338, 230, 289, 207 ), PoolVector2Array( 425, 458, 645, 458, 668, 436, 697, 428, 715, 439, 719, 464, 704, 489, 666, 499, 597, 512, 509, 513, 447, 505, 396, 499, 359, 479, 360, 451, 380, 434, 406, 434 ) ]

[sub_resource type="RectangleShape2D" id=18]
extents = Vector2( 700, 56 )

[sub_resource type="RectangleShape2D" id=39]
extents = Vector2( 64, 32 )

[node name="MainGame" type="Node2D"]
script = ExtResource( 6 )

[node name="bg" type="Sprite" parent="."]
position = Vector2( 541, 363 )
scale = Vector2( 9.0858, 12.76 )
texture = ExtResource( 4 )

[node name="PlayerSpawn" type="Node2D" parent="."]
position = Vector2( 544, 539 )

[node name="Player" parent="." groups=["player"] instance=ExtResource( 2 )]
position = Vector2( 544, 539 )

[node name="NavigationMap" type="Navigation2D" parent="."]
script = ExtResource( 12 )
minimum_spawn_time = 4
maximum_spawn_time = 8
enemy_scene = ExtResource( 9 )

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="NavigationMap"]
position = Vector2( 0, -83 )
navpoly = SubResource( 37 )

[node name="SpawnTimer" type="Timer" parent="NavigationMap"]

[node name="Spawn1" type="Node2D" parent="NavigationMap"]
position = Vector2( -30, 208 )

[node name="Spawn2" type="Node2D" parent="NavigationMap"]
position = Vector2( 1117, 195 )

[node name="Spawn3" type="Node2D" parent="NavigationMap"]
position = Vector2( -21, 513 )

[node name="Spawn4" type="Node2D" parent="NavigationMap"]
position = Vector2( 1102, 502 )

[node name="Level" type="Node2D" parent="."]
position = Vector2( 540, 590 )

[node name="Lava" type="Node2D" parent="Level"]
position = Vector2( 0, 116 )

[node name="Sprite" type="Sprite" parent="Level/Lava"]
position = Vector2( 0, 37 )
texture = ExtResource( 5 )

[node name="Area2D" type="Area2D" parent="Level/Lava" groups=["lava"]]
collision_layer = 3
collision_mask = 3
script = ExtResource( 7 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Lava/Area2D"]
position = Vector2( 15, 48 )
shape = SubResource( 18 )

[node name="Platforms" type="Node2D" parent="Level"]

[node name="MainFloor" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 0, 60 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/MainFloor"]
texture = ExtResource( 16 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level/Platforms/MainFloor"]
polygon = PoolVector2Array( -412, -72, 412, -72, 412, -64, 403, -50, 337, -7, 337, 18, 376, 55, -394, 54, -357, 19, -341, -5, -379, -30, -406, -51, -411, -61 )

[node name="MainCeiling" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -10, -665 )
scale = Vector2( 12.5868, 0.5 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/MainCeiling"]
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Level/Platforms/MainCeiling"]
shape = SubResource( 39 )

[node name="SidePlatformLeft" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -405, -302 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/SidePlatformLeft"]
texture = ExtResource( 1 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level/Platforms/SidePlatformLeft"]
polygon = PoolVector2Array( -220, -18, 139, -18, 139, -9, 113, 18, 38, 19, -140, 5.99999, -220, 1 )

[node name="SidePlatformRight" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 359, -338 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/SidePlatformRight"]
texture = ExtResource( 8 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level/Platforms/SidePlatformRight"]
polygon = PoolVector2Array( -128, -24, 127, -24, 127, 0, 75, 26, -115, 2 )

[node name="SidePlatformRight2" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 504, -302 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/SidePlatformRight2"]
texture = ExtResource( 10 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level/Platforms/SidePlatformRight2"]
polygon = PoolVector2Array( -35, -15, 140, -15, 140, 16, -13, 16 )

[node name="TopPlatform" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -33, -496 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/TopPlatform"]
texture = ExtResource( 11 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level/Platforms/TopPlatform"]
polygon = PoolVector2Array( -194, -20, 195, -19, 195, -11, 171, 11, 11, 20, -87, 20, -168, 11, -194, -10 )

[node name="MiddlePlatform" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -9, -203 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/MiddlePlatform"]
texture = ExtResource( 13 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level/Platforms/MiddlePlatform"]
polygon = PoolVector2Array( -141, -18, 140, -18, 140, -6, 106, 7, 34, 17, -77, 13, -118, 4, -140, -10 )

[node name="TopPlatformLeft" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( -469, -536 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/TopPlatformLeft"]
texture = ExtResource( 14 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level/Platforms/TopPlatformLeft"]
polygon = PoolVector2Array( 73, -15, 73, -7, 28, 15, -3, 15, -73, 12, -128, 8, -128, -15 )

[node name="TopPlatformRight" type="StaticBody2D" parent="Level/Platforms" groups=["wall"]]
position = Vector2( 496, -536 )
collision_layer = 3
collision_mask = 3

[node name="Sprite" type="Sprite" parent="Level/Platforms/TopPlatformRight"]
texture = ExtResource( 15 )

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Level/Platforms/TopPlatformRight"]
polygon = PoolVector2Array( -43, -13, 128, -13, 128, 13, -8, 13, -43, -5 )

[connection signal="spawn_enemy" from="NavigationMap" to="Level/Lava/Area2D" method="_on_NavigationMap_spawn_enemy"]
[connection signal="timeout" from="NavigationMap/SpawnTimer" to="NavigationMap" method="_on_SpawnTimer_timeout"]
[connection signal="body_entered" from="Level/Lava/Area2D" to="Player" method="_on_Area2D_body_entered"]
